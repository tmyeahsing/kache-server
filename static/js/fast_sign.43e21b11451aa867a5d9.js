!function(e){function t(n){if(o[n])return o[n].exports;var s=o[n]={exports:{},id:n,loaded:!1};return e[n].call(s.exports,s,s.exports,t),s.loaded=!0,s.exports}var o={};return t.m=e,t.c=o,t.p="/static/",t(0)}([function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}var s=o(39),i=n(s),a=o(38),r=n(a),l=o(90),u=n(l);Vue.transition("zoom",{enterClass:"zoomIn",leaveClass:"zoomOut"}),new Vue({el:"#main_contain",components:{uploader:r["default"],phoneBinder:u["default"]},data:{type:0,typeMap:{0:"开不动，轮胎坏了",1:"开不动，不知何故"},uploadMaxLength:4,isVerifyContainerShown:!1,phone:"",code:"",now:void 0,lastSendDate:void 0,console:""},methods:{selectType:function(e){this.type=e},sign:function(){var e=this;ToastHandler.showLoading("确认报修信息..."),this.getUserInfo().then(function(t){ToastHandler.hideLoading(),e._userId=t.objectId,t.myMobilePhoneNumber?e.doSign():e.showVerifyContainer()})["catch"](function(t){ToastHandler.hideLoading(),e.console=t.responseText})},doSign:function(){function e(e){var o={desc:t.typeMap[t.type]};ToastHandler.showLoading("提交报修信息..."),e&&(o.images=e.data.map(function(e,t){return e.fileUrl}),o.thumbnails=e.data.map(function(e,t){return e.filethumbnailUrl})),$.promiseAjax({url:"/api/order",type:"POST",data:o}).then(function(e){ToastHandler.hideLoading(),e.success&&ToastHandler.showToast("提交成功",function(){window.location.href="./order_list.html"})})["catch"](function(e){ToastHandler.hideLoading(),t.console=e.responseText})}var t=this,o=this.$refs.uploader.uploadFiles;if(o.length){var n=new FormData;ToastHandler.showLoading("发送照片..."),o.forEach(function(e,t){n.append("images["+t+"]",e.file)}),$.promiseAjax({url:"/api/upload",type:"post",data:n,processData:!1,contentType:!1}).then(function(t){ToastHandler.hideLoading(),e(t)})["catch"](function(e){ToastHandler.hideLoading(),t.console=e.responseText})}else e()},getUserInfo:function(){return $.grantedAjax({url:"https://api.leancloud.cn/1.1/users/me"})},showVerifyContainer:function(){this.isVerifyContainerShown=!0},hideVerifyContainer:function(){this.isVerifyContainerShown=!1},toggleVerifyContainer:function(){this.isVerifyContainerShown=!this.isVerifyContainerShown},sendMsg:function(){var e=this;ToastHandler.showLoading("发送验证码..."),$.grantedAjax({url:"https://api.leancloud.cn/1.1/requestSmsCode",type:"post",contentType:"application/json",data:(0,i["default"])({mobilePhoneNumber:e.phone})}).then(function(t){$.promiseAjax({url:"https://api.leancloud.cn/1.1/date"}).then(function(t){e.now=+new Date(t.iso),e.lastSendDate=+new Date(t.iso);var o=setInterval(function(){e.now+=1e3,e.now-e.lastSendDate>=6e4&&clearInterval(o)},1e3)})["catch"](function(e){return console.log(e)}),ToastHandler.hideLoading(),ToastHandler.showToast("验证码已发送")})["catch"](function(t){ToastHandler.hideLoading(),e.console=t.responseText})},validateCode:function(){var e=this;ToastHandler.showLoading("验证中..."),$.grantedAjax({url:"https://api.leancloud.cn/1.1/verifySmsCode/"+e.code+"?mobilePhoneNumber="+e.phone,type:"post",contentType:"application/json"}).then(function(){return e.modifyUserMobile()}).then(function(){ToastHandler.hideLoading(),ToastHandler.showToast("绑定成功",function(){e.hideVerifyContainer(),e.doSign()})})["catch"](function(t){ToastHandler.hideLoading(),e.console=t.responseText})},modifyUserMobile:function(){var e=this;return ToastHandler.showLoading("绑定中..."),$.grantedAjax({url:"https://api.leancloud.cn/1.1/users/"+e._userId,type:"put",contentType:"application/json",data:(0,i["default"])({myMobilePhoneNumber:e.phone})})}},filters:{countDownText:function(e){return e<=0?"发送验证码":Math.round(e/1e3)+"秒后重发"}}})},,,function(e,t){var o=e.exports={version:"1.2.6"};"number"==typeof __e&&(__e=o)},,,,,,,,function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var s=o(32),i=n(s),a=o(30),r=n(a),l=o(31),u=n(l);t["default"]={components:{CellHeader:i["default"],CellBody:r["default"],CellFooter:u["default"]}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={data:function(){return{shown:!1,text:""}},methods:{show:function(e){this.text=e,this.shown=!0},hide:function(){this.shown=!1}}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=void 0;t["default"]={data:function(){return{shown:!1,text:""}},methods:{show:function(e,t){var n=this;o&&clearTimeout(o),this.text=e,this.shown=!0,o=setTimeout(function(){n.shown=!1,clearTimeout(o),o=void 0,"function"==typeof t&&t()},3e3)}}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={props:{imageUrl:{type:String,required:!0},hasStatus:{type:Boolean,required:!1,"default":!1},index:{type:Number,required:!1},cancelable:{type:Boolean,required:!1,"default":!0}},methods:{dispatchDelete:function(e,t){this.$dispatch("weui-file-delete",t,e)}}}},function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var s=o(33),i=n(s),a=o(37),r=n(a),l=o(36),u=n(l);t["default"]={props:{maxLength:{type:Number,required:!1,validator:function(e){return e>0}},hasInput:{type:Boolean,required:!1,"default":!0}},data:function(){return{uploadFiles:[]}},computed:{count:function(){return this.uploadFiles.length},showInput:function(){return!(this.uploadFiles.length>=this.maxLength)}},methods:{addFiles:function(e){var t=this.maxLength-this.uploadFiles.length,o=[];Array.prototype.forEach.call(e,function(e){o.push({url:window.URL.createObjectURL(e),status:0,file:e})}),this.uploadFiles=this.uploadFiles.concat(o.splice(0,t))},inputChange:function(e){this.addFiles(e.currentTarget.files),e.currentTarget.value=""}},events:{"weui-file-delete":function(e,t){this.uploadFiles.splice(t,1)}},components:{Cell:i["default"],UploaderFiles:r["default"],UploaderFile:u["default"]},filters:{status:function(e){var t;return t=100===e?"":"number"==typeof e?e+"%":e}}}},,,,,function(e,t){},function(e,t){e.exports=' <div class="weui_cell_bd weui_cell_primary"><slot></slot></div> '},function(e,t){e.exports=" <div class=weui_cell_ft><slot></slot></div> "},function(e,t){e.exports=" <div class=weui_cell_hd><slot></slot></div> "},function(e,t){e.exports=" <div class=weui_cell> <cell-header><slot name=header></slot></cell-header> <cell-body><slot name=body></slot></cell-body> <cell-footer><slot name=footer></slot></cell-footer> </div> "},function(e,t){e.exports=' <div v-show=shown class=weui_loading_toast> <div class=weui_mask_transparent></div> <div class=weui_toast> <div class=weui_loading> <div v-for="n in 12" class=weui_loading_leaf :class="\'weui_loading_leaf_\' + n"></div> </div> <div class=weui_toast_content> {{text}} </div> </div> </div> '},function(e,t){e.exports=" <div v-show=shown> <div class=weui_mask_transparent></div> <div class=weui_toast> <i class=weui_icon_toast></i> <div class=weui_toast_content> {{text}} </div> </div> </div> "},function(e,t){e.exports=" <li :class=\"{'weui_uploader_file': true, 'weui_uploader_status': hasStatus}\" :style=\"{'backgroundImage': 'url(' + imageUrl + ')'}\"> <a href=javascript:; v-if=cancelable class=weui_icon_clear @click=dispatchDelete(index)></a> <div class=weui_uploader_status_content> <slot name=status></slot> </div> </li> "},function(e,t){e.exports=" <div class=weui_uploader_files><slot></slot></div> "},function(e,t){e.exports=' <div class=weui_uploader> <cell class=weui_uploader_hd> <span slot=body><slot name=title></slot></span> <span slot=footer v-if="count >= 0 && maxLength > 0">{{count}}/{{maxLength}}</span> </cell> <div class=weui_uploader_bd> <uploader-files> <ul> <uploader-file :image-url=item.url v-for="item in uploadFiles" :has-status=false :index=$index> </uploader-file> </ul> </uploader-files> <div class=weui_uploader_input_wrp v-if=hasInput v-show=showInput> <input type=file class=weui_uploader_input accept=image/jpg,image/jpeg,image/png,image/gif multiple=multiple @change=inputChange> </div> </div> <p class=weui_uploader_full style="display: none" v-show="count >= maxLength ? true : false">最多上传{{maxLength}}张</p> </div> '},function(e,t,o){var n,s;s=o(21),e.exports=n||{},e.exports.__esModule&&(e.exports=e.exports["default"]),s&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=s)},function(e,t,o){var n,s;s=o(22),e.exports=n||{},e.exports.__esModule&&(e.exports=e.exports["default"]),s&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=s)},function(e,t,o){var n,s;s=o(23),e.exports=n||{},e.exports.__esModule&&(e.exports=e.exports["default"]),s&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=s)},function(e,t,o){var n,s;n=o(11),s=o(24),e.exports=n||{},e.exports.__esModule&&(e.exports=e.exports["default"]),s&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=s)},function(e,t,o){var n,s;n=o(12),s=o(25),e.exports=n||{},e.exports.__esModule&&(e.exports=e.exports["default"]),s&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=s)},function(e,t,o){var n,s;n=o(13),s=o(26),e.exports=n||{},e.exports.__esModule&&(e.exports=e.exports["default"]),s&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=s)},function(e,t,o){var n,s;n=o(14),s=o(27),e.exports=n||{},e.exports.__esModule&&(e.exports=e.exports["default"]),s&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=s)},function(e,t,o){var n,s;s=o(28),e.exports=n||{},e.exports.__esModule&&(e.exports=e.exports["default"]),s&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=s)},function(e,t,o){var n,s;o(20),n=o(15),s=o(29),e.exports=n||{},e.exports.__esModule&&(e.exports=e.exports["default"]),s&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=s)},function(e,t,o){e.exports={"default":o(52),__esModule:!0}},,,,,,,,,,function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var s=o(39),i=n(s),a=o(35),r=n(a),l=o(34),u=n(l);t["default"]={components:{toast:r["default"],loadingToast:u["default"]},data:function(){return{show:!0}},methods:{sendMsg:function(){var e=this;e.showLoading("发送验证码..."),$.grantedAjax({url:"https://api.leancloud.cn/1.1/requestSmsCode",type:"post",contentType:"application/json",data:(0,i["default"])({mobilePhoneNumber:e.phone})}).then(function(t){e.hideLoading(),e.showToast("验证码已发送")})["catch"](function(t){e.hideLoading(),e.console=t.responseText})},validateCode:function(){var e=this;e.showLoading("验证中..."),$.grantedAjax({url:"https://api.leancloud.cn/1.1/verifySmsCode/"+e.code+"?mobilePhoneNumber="+e.phone,type:"post",contentType:"application/json"}).then(function(){return e.modifyUserMobile()}).then(function(){e.hideLoading(),e.showToast("绑定成功",function(){e.hideVerifyContainer(),e.doSign()})})["catch"](function(t){e.hideLoading(),e.console=t.responseText})},modifyUserMobile:function(){var e=this;return e.showLoading("绑定中..."),$.grantedAjax({url:"https://api.leancloud.cn/1.1/users/"+e._userId,type:"put",contentType:"application/json",data:(0,i["default"])({myMobilePhoneNumber:e.phone})})}}}},,,function(e,t,o){var n=o(3);e.exports=function(e){return(n.JSON&&n.JSON.stringify||JSON.stringify).apply(JSON,arguments)}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t){},,,function(e,t){e.exports=' <div class="g_bind_phone animated" v-show=show transition=zoom> <div class=weui_cells_title><i class=weui_icon_warn></i>绑定手机号，方便维修人员及时联系您</div> <div class="weui_cells weui_cells_form"> <div class="weui_cell weui_vcode"> <div class="weui_cell_bd weui_cell_primary"> <input class=weui_input type=number pattern=[0-9]* placeholder=请输入手机号 v-model=phone> </div> <div class=weui_cell_ft> <a class="weui_btn weui_btn_primary weui_btn_mini" href=javascript: @click=sendMsg>获取验证码</a> </div> </div> <div class=weui_cell> <div class="weui_cell_bd weui_cell_primary"> <input class=weui_input type=number placeholder=请输入验证码 v-model=code> </div> </div> </div> <div class=weui_btn_area> <a class="weui_btn weui_btn_primary" href=javascript: @click=validateCode>提交</a> </div> <p>{{console}}</p> </div> <toast v-ref:toast></toast> <loading-toast v-ref:loading></loading-toast> '},,function(e,t,o){var n,s;o(85),n=o(49),s=o(88),e.exports=n||{},e.exports.__esModule&&(e.exports=e.exports["default"]),s&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=s)}]);